(()=>{var __webpack_modules__={349:(t,e,n)=>{"use strict";n.d(e,{SH:()=>i,ZP:()=>r,Fy:()=>_,bE:()=>o,OK:()=>a,ZA:()=>s});var i=192,r=224,_=192,o=224;function a(t){return t/_}function s(t){return t/o}},799:(t,e,n)=>{"use strict";n.d(e,{Fe:()=>o,VN:()=>a,wv:()=>s,cf:()=>u,DP:()=>p,zA:()=>c,so:()=>h});var i=n(349),r=n(822),_=n(296),o=function(){return{onInit:[],onUpdate:[],onPostMotion:[],onPostUpdate:[],onAttack:[],onDestroy:[],onExitScreen:[],onKill:[]}},a=function(){return{onInit:[],onUpdate:[],onPostMotion:[],onStateChange:[],onPostUpdate:[],onAttack:[],onContact:[],onDestroy:[]}},s={w0:-i.SH,w1:i.SH,h0:-i.ZP,h1:i.ZP,max:1/0,inner_bound:!0,outer_bound:!1},u=function(t){return function(e){e.onInit.push((function(e){var n=e.custom_fields;n.in_screen=e.px>t.w0&&e.px<t.w1&&e.py>t.h0&&e.py<t.h1,n.ref_count=0})),e.onPostMotion.push((function(e,n){var i=e.custom_fields,r=i.in_screen;i.in_screen=e.px>t.w0&&e.px<t.w1&&e.py>t.h0&&e.py<t.h1,r&&!i.in_screen&&t.inner_bound&&(i.ref_count<t.max&&e.px<=t.w0&&(i.ref_count++,e.vx=-e.vx,e.px=2*t.w0-e.px),i.ref_count<t.max&&e.px>=t.w1&&(i.ref_count++,e.vx=-e.vx,e.px=2*t.w1-e.px),i.ref_count<t.max&&e.py<=t.h0&&(i.ref_count++,e.vy=-e.vy,e.py=2*t.h0-e.py),i.ref_count<t.max&&e.py>=t.h1&&(i.ref_count++,e.vy=-e.vy,e.py=2*t.h1-e.py),e.dir=Math.atan2(e.vy,e.vx),i.in_screen=!0),!r&&i.in_screen&&t.outer_bound&&(i.ref_count<t.max&&e.px>=t.w0&&(i.ref_count++,e.vx=-e.vx,e.px=2*t.w0-e.px),i.ref_count<t.max&&e.px<=t.w1&&(i.ref_count++,e.vx=-e.vx,e.px=2*t.w1-e.px),i.ref_count<t.max&&e.py>=t.h0&&(i.ref_count++,e.vy=-e.vy,e.py=2*t.h0-e.py),i.ref_count<t.max&&e.py<=t.h1&&(i.ref_count++,e.vy=-e.vy,e.py=2*t.h1-e.py),e.dir=Math.atan2(e.vy,e.vx),i.in_screen=!1)}))}},p=function(t){return function(e){return e.custom_fields.ref_count=t.max}},c={name:"",w0:-i.SH,w1:i.SH,h0:-i.ZP,h1:i.ZP,max:1/0,maxlen:NaN,v:NaN,body:null,cf:null},h=function(t){return function(e){var n=function(e,n){var r=e.custom_fields;if(r.togrow>0){var _=Math.min(r.togrow,t.v*n);n-=_/t.v,e.len+=_,r.togrow-=_}n>0&&(e.px+=n*r.vx,e.py+=n*r.vy),e.shaped_sprite.end.shape.rawExitScreen(e.px+e.len*Math.cos(e.dir),e.py+e.len*Math.sin(e.dir),e.shaped_sprite.base,i.SH,i.ZP)&&e.shaped_sprite.base.shape.rawExitScreen(e.px,e.py,e.shaped_sprite.base,i.SH,i.ZP)&&(e.state=3)},o=function(e,n){return e>t.w0&&e<t.w1&&n>t.h0&&n<t.h1},a=function(e,n){var r=e.custom_fields;if(r.toshrink>0){var _=Math.min(r.toshrink,t.v*n);e.len-=_,r.toshrink-=_,r.toshrink<=0&&(e.state=3)}r.togrow>0&&(n-=(_=Math.min(r.togrow,t.v*n))/t.v,e.len+=_,r.togrow-=_),n>0&&(e.px+=n*r.vx,e.py+=n*r.vy),e.shaped_sprite.base.shape.rawExitScreen(e.px,e.py,e.shaped_sprite.base,i.SH,i.ZP)&&(e.state=3)};e.onInit.push((function(e){var i=e.custom_fields;i.ref_count=0,i.vx=t.v*Math.cos(e.dir),i.vy=t.v*Math.sin(e.dir),i.togrow=t.maxlen,i.toshrink=0,e.motion=n})),e.onPostMotion.push((function(e,n){var i=e.custom_fields,s=(o(e.px,e.py),e.px+e.len*Math.cos(e.dir)),u=e.py+e.len*Math.sin(e.dir);if(!o(s,u)&&i.ref_count<t.max){var p=new _.Fu(t.body,t.cf,a);p.init(e.px,e.py,e.dir,e.len);var c=p.custom_fields;c.vx=i.vx,c.vy=i.vy,c.togrow=i.togrow,r.n.INSTANCE.add(p);var h=0,l=0;i.ref_count<t.max&&s<=t.w0&&(h=t.w0,l=e.py+(t.w0-e.px)*i.vy/i.vx,i.ref_count++,i.vx=-i.vx,e.px=2*t.w0-e.px),i.ref_count<t.max&&s>=t.w1&&(h=t.w1,l=e.py+(t.w1-e.px)*i.vy/i.vx,i.ref_count++,i.vx=-i.vx,e.px=2*t.w1-e.px),i.ref_count<t.max&&u<=t.h0&&(l=t.h0,h=e.px+(t.h0-e.py)*i.vx/i.vy,i.ref_count++,i.vy=-i.vy,e.py=2*t.h0-e.py),i.ref_count<t.max&&u>=t.h1&&(l=t.h1,h=e.px+(t.h1-e.py)*i.vx/i.vy,i.ref_count++,i.vy=-i.vy,e.py=2*t.h1-e.py);var d=Math.sqrt(Math.pow(e.px-h,2)+Math.pow(e.py-l,2));e.len-=d,e.px=h,e.py=l,i.togrow+=d,p.len=d,c.toshrink=d+c.togrow,e.dir=Math.atan2(i.vy,i.vx)}}))}}},869:(t,e,n)=>{"use strict";n.d(e,{T:()=>i,ZE:()=>r,yR:()=>_,A4:()=>o,t_:()=>a,T7:()=>s,KZ:()=>u,DV:()=>p,P4:()=>c,k8:()=>h,Gs:()=>l,Io:()=>d,NH:()=>f,bm:()=>E,d9:()=>M,S:()=>y});var i=0,r=1,_=2,o=3,a=4,s=5,u=0,p=1,c=1,h=1,l=14,d=0,f=0,E=500;function M(t){return Object.assign({},t)}var y={render_layer:700,collide_group:i,collide_mask:u}},651:(t,e,n)=>{"use strict";n.d(e,{R0:()=>u,uQ:()=>c});var i,r=n(869),_=n(822),o=n(349),a=n(566),s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u={render_layer:r.bm,collide_group:r.A4,collide_mask:r.A4,kill_on_exit:!0,kill_by:function(t){return t==r.t_||t==r.T},auto_direction:!0,life:0,listener:null},p=function(t,e){return!0},c=function(t){function e(e,n){var i=t.call(this,e)||this;return i.state=0,i.motion=p,i.custom_fields={},i.config=n,i.time=0,i}return s(e,t),e.prototype.setMotion=function(t){return this.motion=t,this.simpleInit(0,0,0,0)},e.prototype.simpleInit=function(t,e,n,i){return this.px=t,this.py=e,this.vx=n*Math.cos(i),this.vy=n*Math.sin(i),this.dir=i,this.motion(this,0)&&this.config.auto_direction&&(this.dir=Math.atan2(this.vy,this.vx)),this},e.prototype.init=function(t){return t(this),this},e.prototype.update=function(t){var e,n,i,r,o,a,s=this;0==this.state&&(this.state=1,null===(n=null===(e=this.config.listener)||void 0===e?void 0:e.onInit)||void 0===n||n.forEach((function(t){return t(s)})));var u=_.n.INSTANCE.special_effects.time_rate;this.time+=u,null===(r=null===(i=this.config.listener)||void 0===i?void 0:i.onUpdate)||void 0===r||r.forEach((function(t){return t(s,u)})),this.motion(this,u)&&(this.px+=this.vx*u,this.py+=this.vy*u,this.config.auto_direction&&(this.dir=Math.atan2(this.vy,this.vx))),this.shaped_sprite.sprite.omega&&(this.dir=this.time*this.shaped_sprite.sprite.omega),null===(a=null===(o=this.config.listener)||void 0===o?void 0:o.onPostMotion)||void 0===a||a.forEach((function(t){return t(s,u)}))},e.prototype.postUpdate=function(t){var e,n,i,r,_,a,s,u,p=this;(null===(n=null===(e=this.shaped_sprite)||void 0===e?void 0:e.shape)||void 0===n?void 0:n.exitScreen(this,o.SH,o.ZP))&&(this.config.kill_on_exit&&(this.state=2),null===(r=null===(i=this.config.listener)||void 0===i?void 0:i.onExitScreen)||void 0===r||r.forEach((function(t){return t(p)}))),this.config.life&&this.time>=this.config.life&&(this.state=2),null===(a=null===(_=this.config.listener)||void 0===_?void 0:_.onPostUpdate)||void 0===a||a.forEach((function(t){return t(p)})),2==this.state&&(null===(u=null===(s=this.config.listener)||void 0===s?void 0:s.onDestroy)||void 0===u||u.forEach((function(t){return t(p)})),this.state=3)},e.prototype.attack=function(t,e){var n,i,r=this;null===(i=null===(n=this.config.listener)||void 0===n?void 0:n.onAttack)||void 0===i||i.forEach((function(t){return t(r,e)})),e.damaged(e,this)},e.prototype.damaged=function(t,e){var n,i,r=this;return!!this.config.kill_by(e.config.collide_group)&&(this.state=2,null===(i=null===(n=this.config.listener)||void 0===n?void 0:n.onKill)||void 0===i||i.forEach((function(t){return t(r,e)})),!0)},e}(a.eY)},296:(t,e,n)=>{"use strict";n.d(e,{cE:()=>s,Fu:()=>u});var i,r,_=n(566),o=n(822),a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this)||this;return n.func=e,n}return a(e,t),e.prototype.distanceTo=function(t,e,n){return Math.min(this.func(t,e,n),t.shaped_sprite.base.shape.rawDistanceTo(t.px,t.py,1,e,n),t.shaped_sprite.end.shape.rawDistanceTo(t.px+t.len*Math.cos(t.dir),t.py+t.len*Math.sin(t.dir),1,e,n))},e.line_circle=function(t,e,n){var i=t.px+t.shaped_sprite.hitbox_width*Math.cos(t.dir),r=t.py+t.shaped_sprite.hitbox_width*Math.sin(t.dir),_=t.px+(t.len-t.shaped_sprite.hitbox_width)*Math.cos(t.dir),o=t.py+(t.len-t.shaped_sprite.hitbox_width)*Math.sin(t.dir),a=Math.sqrt(Math.pow(i-_,2)+Math.pow(r-o,2)),s=Math.abs((_-i)*(r-n)-(i-e)*(o-r)),u=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-n,2)),p=Math.sqrt(Math.pow(_-e,2)+Math.pow(o-n,2));return Math.pow(Math.max(u,p),2)>Math.pow(Math.min(u,p),2)+Math.pow(a,2)?Math.min(u,p)-t.shaped_sprite.hitbox_width*t.w:Math.min(s/a,u,p)-t.shaped_sprite.hitbox_width*t.w},e.double_arc=function(t,e,n){var i=e-t.px,r=n-t.py,o=i*Math.cos(-t.dir)-r*Math.sin(-t.dir),a=i*Math.sin(-t.dir)+r*Math.cos(-t.dir);return _.HC.orthDis(o-t.len/2,a,t.len/2,t.w*t.shaped_sprite.hitbox_width)},e.half_arc=function(t,e,n){var i=e-t.px,r=n-t.py,o=i*Math.cos(-t.dir)-r*Math.sin(-t.dir),a=i*Math.sin(-t.dir)+r*Math.cos(-t.dir);return o<0?Math.sqrt(Math.pow(o,2)+Math.pow(a,2)):_.HC.orthDis(o,a,t.len,t.w*t.shaped_sprite.hitbox_width)},e}(_.bn),u=(r=_.Yw,a((function(){return null!==r&&r.apply(this,arguments)||this}),r),function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.state=0,r.rstate=0,r.time=0,r.custom_fields={},r.config=n,r.motion=i,r}return a(e,t),e.prototype.init=function(t,e,n,i){return this.len=i,this.dir=n,this.px=t,this.py=e,this.checkState(),this},e.prototype.checkState=function(){var t,e,n,i,r,_,o,a,s,u,p=this;0==this.state&&(this.state=2,null===(e=null===(t=this.config.listener)||void 0===t?void 0:t.onInit)||void 0===e||e.forEach((function(t){return t(p)})));var c=this.config.warning_time,h=this.config.open_time+c,l=this.config.alive_time+h,d=this.config.close_time+l;0==this.rstate&&this.time>=c&&(this.rstate=1,null===(i=null===(n=this.config.listener)||void 0===n?void 0:n.onStateChange)||void 0===i||i.forEach((function(t){return t(p)}))),1==this.rstate&&(this.w=Math.min(1,(this.time-c)/(h-c)),this.time>=h&&(this.rstate=2,this.state=1,this.w=1,null===(_=null===(r=this.config.listener)||void 0===r?void 0:r.onStateChange)||void 0===_||_.forEach((function(t){return t(p)})))),2==this.rstate&&this.time>=l&&(this.rstate=3,this.state=2,null===(a=null===(o=this.config.listener)||void 0===o?void 0:o.onStateChange)||void 0===a||a.forEach((function(t){return t(p)}))),3==this.rstate&&(this.w=Math.max(0,1-(this.time-l)/(d-l)),this.time>=d&&(this.state=3,null===(u=null===(s=this.config.listener)||void 0===s?void 0:s.onDestroy)||void 0===u||u.forEach((function(t){return t(p)}))))},e.prototype.update=function(t){var e,n,i,r,_,a,s=this;0==this.state&&(this.state=2,null===(n=null===(e=this.config.listener)||void 0===e?void 0:e.onInit)||void 0===n||n.forEach((function(t){return t(s)})));var u=o.n.INSTANCE.special_effects.time_rate;this.time+=u,this.checkState(),null===(r=null===(i=this.config.listener)||void 0===i?void 0:i.onUpdate)||void 0===r||r.forEach((function(t){return t(s,u)})),this.motion(this,u),null===(a=null===(_=this.config.listener)||void 0===_?void 0:_.onPostMotion)||void 0===a||a.forEach((function(t){return t(s,u)}))},e.prototype.postUpdate=function(t){var e,n,i=this;null===(n=null===(e=this.config.listener)||void 0===e?void 0:e.onPostUpdate)||void 0===n||n.forEach((function(t){return t(i)}))},e.prototype.attack=function(t,e){var n,i,r=this;null===(i=null===(n=this.config.listener)||void 0===n?void 0:n.onAttack)||void 0===i||i.forEach((function(t){return t(r,e)})),e.damaged(e,this)},e.prototype.damaged=function(t,e){var n,i,r=this;return null===(i=null===(n=this.config.listener)||void 0===n?void 0:n.onContact)||void 0===i||i.forEach((function(t){return t(r,e)})),!1},e}(function(t){function e(e){var n=t.call(this,0,e)||this;return n.w=0,n}return a(e,t),e.prototype.rectCount=function(){return 3},e.prototype.render=function(t,e){var n=this.shaped_sprite.l_ratio*this.len/2;t[10*e+0]=this.px+n*Math.cos(this.dir),t[10*e+1]=this.py+n*Math.sin(this.dir),t[10*e+2]=this.dir+Math.PI/2,t[10*e+3]=Math.max(1,this.shaped_sprite.sprite_width*this.w),t[10*e+4]=n;var i=this.shaped_sprite.sprite;t[10*e+5]=i.tx/i.sprite.w,t[10*e+6]=i.ty/i.sprite.h,t[10*e+7]=i.tw/i.sprite.w,t[10*e+8]=i.th/i.sprite.h,t[10*e+9]=1,e++;var r=this.shaped_sprite.base;t[10*e+0]=this.px,t[10*e+1]=this.py,t[10*e+2]=this.dir+Math.PI/2,t[10*e+3]=r.w/2,t[10*e+4]=r.h/2,i=r.sprite,t[10*e+5]=i.tx/i.sprite.w,t[10*e+6]=i.ty/i.sprite.h,t[10*e+7]=i.tw/i.sprite.w,t[10*e+8]=i.th/i.sprite.h,t[10*e+9]=1,e++,r=this.shaped_sprite.end,t[10*e+0]=this.px+this.len*Math.cos(this.dir),t[10*e+1]=this.py+this.len*Math.sin(this.dir),t[10*e+2]=this.dir+Math.PI/2,t[10*e+3]=r.w/2,t[10*e+4]=r.h/2,i=r.sprite,t[10*e+5]=i.tx/i.sprite.w,t[10*e+6]=i.ty/i.sprite.h,t[10*e+7]=i.tw/i.sprite.w,t[10*e+8]=i.th/i.sprite.h,t[10*e+9]=1},e}(_.hE)))},533:(t,e,n)=>{"use strict";n.d(e,{U:()=>u});var i,r=n(566),_=n(349),o=n(869),a=n(822),s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(n,i,r,_,a){var s=t.call(this,(0,o.d9)(n))||this;return s.config=o.S,s.state=1,s.miss=!1,s.bomb=!1,s.pre_miss=0,s.miss_time=0,s.invince_time=0,s.prex=0,s.prey=0,s.time=0,s.collideCheck=function(t){for(var e=Math.sqrt(Math.pow(s.px-s.prex,2)+Math.pow(s.py-s.prey,2)),n=Math.max(1,Math.ceil(e/2)),i=1/0,r=0;r<n;r++){var _=s.px+(s.prex-s.px)*r/n,o=s.py+(s.prey-s.py)*r/n;i=Math.min(i,t.distanceTo(_,o))}return i<s.shaped_sprite.shape.radius},e.INSTANCE=s,s.proto=i,s.ability=r,s.sprite=n,s.px=_,s.py=a,s.dir=0,s}return s(e,t),e.updateState=function(t){e.action=t},e.prototype.update=function(t){var n;if(e.action){this.prex=this.px,this.prey=this.py;var i=a.n.INSTANCE.special_effects.time_rate;this.time+=i,this.px+=e.action.pos_x*i,this.py+=e.action.pos_y*i,this.px<-_.SH&&(this.px=-_.SH),this.px>_.SH&&(this.px=_.SH),this.py<-_.ZP&&(this.py=-_.ZP),this.py>_.ZP&&(this.py=_.ZP),(null===(n=this.shaped_sprite)||void 0===n?void 0:n.sprite)&&(this.dir=this.time*this.shaped_sprite.sprite.omega),this.proto.updateShoot(e.action.key_z),this.bomb=this.proto.updateBomb(e.action.key_x),this.proto.updateSpecial(e.action.key_c)}},e.prototype.postUpdate=function(t){this.miss_time>0&&this.miss_time--,this.pre_miss>0&&(this.pre_miss--,0==this.pre_miss&&(console.log("missed"),this.miss_time=this.ability.miss_time)),this.miss&&(this.miss=!1,this.pre_miss=this.ability.pre_miss),this.bomb&&(this.bomb=!1,this.miss_time=this.ability.bomb_time,this.pre_miss>0&&(console.log("bomb after miss"),this.pre_miss=0)),this.miss_time>0||this.pre_miss>0?(this.invince_time++,Math.floor(this.invince_time/6)%2==0?this.shaped_sprite.sprite=null:this.shaped_sprite.sprite=this.sprite.sprite):(this.invince_time=0,this.shaped_sprite.sprite=this.sprite.sprite)},e.prototype.attack=function(t,e){},e.prototype.damaged=function(t,e){return 0==this.pre_miss&&0==this.miss_time&&(this.miss=!0),e.damaged(e,this)},e.INSTANCE=null,e.action=null,e}(r.eY)},822:(t,e,n)=>{"use strict";n.d(e,{n:()=>a});var i=n(869),r=n(566),_=n(68),o=function(){this.time_rate=1},a=function(){function t(){this.groups=[],this.pending=[],this.update_stage=0,this.time=0,this.special_effects=new o,t.INSTANCE=this,this.groups.push({id:i.T,mask:i.KZ,list:[]}),this.groups.push({id:i.ZE,mask:i.DV,list:[]}),this.groups.push({id:i.yR,mask:i.P4,list:[]}),this.groups.push({id:i.A4,mask:i.k8,list:[]}),this.groups.push({id:i.t_,mask:i.Gs,list:[]}),this.groups.push({id:i.T7,mask:i.Io,list:[]})}return t.prototype.registerGroup=function(t){var e=this.groups.length;return this.groups.push({id:e,mask:t,list:[]}),e},t.prototype.add=function(t){3!=this.update_stage&&0!=this.update_stage?this.pending.push(t):this.groups[t.config.collide_group].list.push(t)},t.prototype.update=function(){var t=this;this.update_stage=1,this.groups.forEach((function(t){return t.list.forEach((function(t){return t.update(t)}))}));for(var e=0;e<this.groups.length;e++)for(var n=0;n<this.groups.length;n++)if(this.groups[e].mask&1<<n)for(var i=0,_=this.groups[e].list;i<_.length;i++){var o=_[i];if(1==o.state&&o.shaped_sprite&&o.shaped_sprite.shape)for(var a=0,s=this.groups[n].list;a<s.length;a++){var u=s[a];1==u.state&&u.shaped_sprite&&u.shaped_sprite.shape&&(0,r._R)(o,u)&&o.attack(o,u)}}this.update_stage=2,this.groups.forEach((function(t){return t.list.forEach((function(t){return t.postUpdate(t)}))})),this.groups.forEach((function(t){return t.list=t.list.filter((function(t){return 3!=t.state}))})),this.update_stage=3,this.pending.forEach((function(e){return t.add(e)})),this.pending=[],this.time++},t.prototype.render=function(){var t,e,n,i,r,o,a,s;return r=this,o=void 0,s=function(){var r,o,a,s,u,p,c,h,l,d;return function(t,e){var n,i,r,_,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return _={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(_){return function(a){return function(_){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&_[0]?i.return:_[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,_[1])).done)return r;switch(i=0,r&&(_=[2&_[0],r.value]),_[0]){case 0:case 1:r=_;break;case 4:return o.label++,{value:_[1],done:!1};case 5:o.label++,i=_[1],_=[0];continue;case 7:_=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==_[0]&&2!==_[0])){o=0;continue}if(3===_[0]&&(!r||_[1]>r[0]&&_[1]<r[3])){o.label=_[1];break}if(6===_[0]&&o.label<r[1]){o.label=r[1],r=_;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(_);break}r[2]&&o.ops.pop(),o.trys.pop();continue}_=e.call(t,o)}catch(t){_=[6,t],i=0}finally{n=r=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,a])}}}(this,(function(f){for(r=new Map,o=0,a=this.groups;o<a.length;o++)for(s=a[o],u=0,p=s.list;u<p.length;u++)(c=p[u]).config.render_layer&&(null===(t=c.shaped_sprite)||void 0===t?void 0:t.sprite)&&(r.has(c.config.render_layer)||r.set(c.config.render_layer,new Map),h=r.get(c.config.render_layer),l=null===(i=null===(n=null===(e=c.shaped_sprite)||void 0===e?void 0:e.sprite)||void 0===n?void 0:n.sprite)||void 0===i?void 0:i.path,h.has(l)||h.set(l,[]),h.get(l).push(c));return d=[],r.forEach((function(t,e){return d.push({rl:e,v:t})})),d.sort((function(t,e){return t.rl-e.rl})),d.forEach((function(t){return t.v.forEach((function(t,e){return _.Z.get(e).draw(t)}))})),[2]}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{_(s.next(t))}catch(t){e(t)}}function i(t){try{_(s.throw(t))}catch(t){e(t)}}function _(e){var r;e.done?t(e.value):(r=e.value,r instanceof a?r:new a((function(t){t(r)}))).then(n,i)}_((s=s.apply(r,o||[])).next())}))},t}()},334:(t,e,n)=>{"use strict";n.d(e,{FX:()=>c,hP:()=>f,b2:()=>M});var i,r=n(869),_=n(566),o=n(822),a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var _=arguments[e],o=0,a=_.length;o<a;o++,r++)i[r]=_[o];return i},u=function(){},p=function(t){function e(e){var n=t.call(this)||this;return n.remain=e,n}return a(e,t),e.prototype.update=function(t){return this.remain-=t,this.remain<0?-this.remain:0},e}(u),c=function(t){function e(e){var n=t.call(this)||this;return n.time=0,n.init=e,n}return a(e,t),e.random=function(t,n){return function(){return new e((function(e){var i=Math.max(n.px0-t.px,-n.dx1),r=Math.min(n.px1-t.px,n.dx1),_=Math.max(n.py0-t.py,-n.dy1),o=Math.min(n.py1-t.py,n.dy1),a=i+Math.random()*(r-i),s=_+Math.random()*(o-_);e.target=t,e.duration=n.duration,e.dx=a,e.dy=s,e.x0=t.px,e.y0=t.py,e.ease=n.ease}))}},e.prototype.update=function(t){0==this.time&&this.init(this),this.time+=t;var e=Math.min(1,this.time/this.duration),n=this.ease(e);return this.target.px=this.x0+this.dx*n,this.target.py=this.y0+this.dy*n,this.time>this.duration?this.time-this.duration:0},e}(u),h=function(t){function e(e){var n=t.call(this)||this;return n.todo=e,n}return a(e,t),e.prototype.update=function(t,e){var n=this.todo();return void 0===n?t:"number"==typeof n?(e.list[0]=new p(n),e.list[0].update(t,e)):(e.list.unshift(e.list[0]),e.list[1]=n,t)},e}(u),l=function(){};function d(t){return t.map((function(t){return"number"==typeof t?new p(t):"function"==typeof t?new h(t):t}))}var f=function(t){function e(e,n){var i=t.call(this)||this;return i.index=0,i.todo=e,i.total=n,i}return a(e,t),e.prototype.supply=function(){return this.index>=this.total?null:(t="function"==typeof this.todo?this.todo(this.index):this.todo,this.index++,d(t));var t},e}(l),E={render_layer:r.NH,collide_group:r.T7,collide_mask:r.Io},M=function(t){function e(e){var n=t.call(this)||this;return n.custom_fields={},n.config=E,n.state=0,n.time=0,n.list=d("object"==typeof e?e:e(n)),n}return a(e,t),e.prototype.init=function(t){return t(this),this},e.prototype.update=function(t){0==this.state&&(this.state=1);var e=o.n.INSTANCE.special_effects.time_rate;for(this.time+=e;this.list.length>0&&e;){var n=this.list[0];if(n instanceof l){var i=n.supply();i&&i.length?this.list=s(i,this.list):this.list.shift()}else(e=n.update(e,this))>0&&this.list.shift()}0==this.list.length&&(this.state=2)},e.prototype.postUpdate=function(t){2==this.state&&(this.state=3)},e.prototype.attack=function(t){},e.prototype.damaged=function(t,e){return!1},e}(_.u5)},176:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>init});var _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(651),_entity_SelfMachine__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(533),_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(334),_util_SpriteManager__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68),_util_sprites__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(940),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(583),_stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(822),_entity_Entity__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(869),_entity_RayLaser__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(296),_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(799),__awaiter=function(t,e,n,i){return new(n||(n=Promise))((function(r,_){function o(t){try{s(i.next(t))}catch(t){_(t)}}function a(t){try{s(i.throw(t))}catch(t){_(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}s((i=i.apply(t,e||[])).next())}))},__generator=function(t,e){var n,i,r,_,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return _={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(_){return function(a){return function(_){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&_[0]?i.return:_[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,_[1])).done)return r;switch(i=0,r&&(_=[2&_[0],r.value]),_[0]){case 0:case 1:r=_;break;case 4:return o.label++,{value:_[1],done:!1};case 5:o.label++,i=_[1],_=[0];continue;case 7:_=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==_[0]&&2!==_[0])){o=0;continue}if(3===_[0]&&(!r||_[1]>r[0]&&_[1]<r[3])){o.label=_[1];break}if(6===_[0]&&o.label<r[1]){o.label=r[1],r=_;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(_);break}r[2]&&o.ops.pop(),o.trys.pop();continue}_=e.call(t,o)}catch(t){_=[6,t],i=0}finally{n=r=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,a])}}},sm_proto={updateShoot:function(t){return!1},updateBomb:function(t){return!1},updateSpecial:function(t){return!1}},sm_abi={pre_miss:30,miss_time:60,bomb_time:60},repeat=function(t,e){return void 0===e&&(e=1/0),function(){return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.hP(t,e)}},nonblock=function(t){return function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2(t))}},sinit={load_sprite:function(){return _util_SpriteManager__WEBPACK_IMPORTED_MODULE_3__.Z.get(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.Xp.path).load()},add_player:function(){return new _entity_SelfMachine__WEBPACK_IMPORTED_MODULE_1__.U(_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.a_,1),sm_proto,sm_abi,0,-192)},add_schedule:null},stage_list,stage_000=function(t){var e=_util_sprites__WEBPACK_IMPORTED_MODULE_4__.hZ(5,1,0),n=_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(e,1);return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([30*t,repeat((function(e){return[repeat((function(i){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(n,_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).simpleInit(0,0,8/t,.003/t*e*e+2*Math.PI/5*i))}]}),5),1*t]}),1/0)])},stage_001=function(t){var e=function(t){return _util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(1,t,0),1)},n=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0);n.life=180*t,n.kill_on_exit=!1;var i={duration:100*t,px0:-96,px1:96,py0:32,py1:112,dx1:64,dy1:64,ease:function(t){return(1-Math.cos(Math.PI*t))/2}},r=1*t,_=3/t,o=-_/70,a=.06/t,s=new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.cI,2),_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).setMotion((function(t){return t.dir=t.time*Math.PI*2/600,!1})).simpleInit(0,64,0,0),u=null,p=function(t,e,i,p){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([repeat((function(c){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(u=new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(null,n).simpleInit(s.px,s.py,_,2*Math.PI/47*c*e*t))},repeat((function(e){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(c%2==0?i:p,_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).setMotion((n=u,r=2*Math.PI/30*e,_=a*t,70,s=o,function(t,e){var i=r+_*t.time,o=70*Math.sin(s*t.time);return t.px=n.px+o*Math.cos(i),t.py=n.py+o*Math.sin(i),t.dir=Math.atan2(o*_,70*s*Math.cos(s*t.time))+i,!1})));var n,r,_,s}]}),30),r]}),47)]))};return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(s)},30*t,repeat((function(n){return[function(){return p(n%2*2-1,7,e(2),e(10))},50*t,function(){return p(n%2*2-1,5,e(13),e(6))},50*t,function(){return p(n%2*2-1,1,e(8),e(4))},_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.FX.random(s,i)]}))])},test_000=function(t){var e=function(t,e,n){return _util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.iW(t,2,1,1,e,n,1)},n=[e(0,0,0),e(0,1,1),e(0,0,1),e(0,1,0),e(4,0,0),e(4,1,1),e(4,0,1),e(4,1,0),e(1,0,0),e(1,1,0)],i={render_layer:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.render_layer,collide_group:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.collide_group,collide_mask:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.collide_mask,warning_time:30*t,open_time:10*t,alive_time:6e3*t,close_time:10*t,listener:null},r=0*Math.PI*2/240/t;return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([30*t,repeat((function(e){return[repeat((function(t){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_RayLaser__WEBPACK_IMPORTED_MODULE_8__.Fu(n[t],i,(_=r*(e%2*2-1),function(t,e){return t.dir+=e*_})).init(50*Math.cos(2*Math.PI/10*t),50*Math.sin(2*Math.PI/10*t),2*Math.PI/10*t,100));var _}]}),10),6e3*t]}))])},stage_002=function(t){var e=_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.p3(2,0,64),n=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0);n.auto_direction=!1;var i={duration:50*t,px0:-96,px1:96,py0:32,py1:112,dx1:64,dy1:64,ease:function(t){return(1-Math.cos(Math.PI*t))/2}},r=new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.cI,2),_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).setMotion((function(t){return t.dir=t.time*Math.PI*2/600,!1})).simpleInit(0,64,0,0),_=function(t){return repeat((function(i){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(e,n).setMotion((function(e,n){return e.dir+=n*t,!0})).simpleInit(r.px,r.py,u,p+2*Math.PI/o*i).init((function(t){return t.dir+=2*Math.PI*a/o*i})))}]}),o)},o=50,a=2.5,s=2*Math.PI/60/t,u=6/t,p=0;return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(r)},30*t,repeat((function(e){return[function(){return p=Math.random()*Math.PI*2},_(s),20*t,_(-s),_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.FX.random(r,i)]}))])},stage_003=function(t){var e=_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(4,2,0),1),n=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0);n.listener=(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.Fe)();var i=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.wv);i.max=100,(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.cf)(i)(n.listener);var r=Math.PI/24,_=6/t,o=100*t,a=1*t,s=1*t,u={duration:o-40*s-20*a,px0:-96,px1:96,py0:32,py1:112,dx1:64,dy1:64,ease:function(t){return(1-Math.cos(Math.PI*t))/2}},p=new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.cI,2),_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).setMotion((function(t){return t.dir=t.time*Math.PI*2/600,!1})).simpleInit(0,64,0,0),c=0;return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(p)},30*t,repeat((function(t){return[function(){return c=Math.random()*Math.PI*2},repeat((function(t){return[nonblock([repeat((function(){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(e,n).setMotion((function(e,n){var a=o-t*s;return e.time-n<a&&e.time>=a&&((0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.DP)(i)(e),e.simpleInit(e.px,e.py,_,e.dir+(2*Math.random()-1)*r)),!0})).simpleInit(p.px,p.py,_,c+2*Math.PI/40*t))},a]}),20)]),s]}),40),20*a,_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.FX.random(p,u)]}))])},stage_004=function(t){var e=[_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(4,2,0),1),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(4,6,0),1)],n=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0),i=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0);n.listener=(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.Fe)(),i.listener=(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.Fe)();var r=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.wv),_=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.wv);r.max=2,r.h0=-1/0,_.max=1,_.h0=-1/0,(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.cf)(r)(n.listener),(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.cf)(_)(i.listener);var o=6/t,a=1*t,s=3*t,u={duration:40*t,px0:-96,px1:96,py0:32,py1:112,dx1:64,dy1:64,ease:function(t){return(1-Math.cos(Math.PI*t))/2}},p=new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.cI,2),_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0).setMotion((function(t){return t.dir=t.time*Math.PI*2/600,!1})).simpleInit(0,64,0,0),c=0,h=function(t,e,n,i){return repeat((function(r){return[nonblock([repeat((function(_){return[repeat((function(a){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(t,i).simpleInit(p.px,p.py,o,c+n*Math.PI*2*(r/8/4+a/4+_/4/8/e*.5)))}]}),8),a]}),e)]),s]}),8)};return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(p)},30*t,repeat((function(t){return[function(){return c=Math.random()*Math.PI*2},h(e[0],10,1,n),10*a,_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.FX.random(p,u),h(e[1],15,-1,i),20*a,_stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.FX.random(p,u)]}))])},stage_005=function(t){var e=function(e,n){var i=_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.iW(4,e,n,1,1,1,.75),r={render_layer:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.render_layer,collide_group:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.collide_group,collide_mask:_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0.collide_mask,warning_time:0,open_time:0,alive_time:1/0,close_time:0,listener:null},_=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(r);r.listener=(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.VN)();var o=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.zA);return o.max=2,o.v=8/t,o.maxlen=128,o.body=i,o.cf=_,o.name=e+"-"+n,(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.so)(o)(r.listener),[i,r,o]},n=[e(6,3),e(2,1)],i=2*Math.PI/t,r=t,_=function(t,e,i,r,_,o){return repeat((function(t){return[repeat((function(_){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_RayLaser__WEBPACK_IMPORTED_MODULE_8__.Fu(n[e][0],n[e][1],null).init(0,0,o+2*Math.PI/i*_+r*t,0))}]}),i),_]}),t)};return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([30*t,repeat((function(e){return[_(20,0,3,(e%2*2-1)*i*.0678,6*r,2*Math.random()*Math.PI),100*t,_(120,1,1,(e%2*2-1)*i*.0234,r,2*Math.random()*Math.PI),100*t]}))])},test_001=function(t){var e=(0,_entity_Entity__WEBPACK_IMPORTED_MODULE_7__.d9)(_entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.R0);e.listener=(0,_entity_ComplexListener__WEBPACK_IMPORTED_MODULE_9__.Fe)(),e.listener.onAttack.push((function(t){return t.custom_fields.callback()}));var n=[[_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(3,6,0),1),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.hZ(2,3,0),1)],[_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(3,2,0),1),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.hZ(2,1,0),1)],[_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(3,8,0),1),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.hZ(2,4,0),1)],[_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.e8(3,10,0),1),_util_shaped_sprites__WEBPACK_IMPORTED_MODULE_5__.xg(_util_sprites__WEBPACK_IMPORTED_MODULE_4__.hZ(2,5,0),1)]],i=2/t;return new _stage_Scheuler__WEBPACK_IMPORTED_MODULE_2__.b2([60*t,repeat((function(r){return[nonblock((10,_=r%4,function(r,o){return void 0===o&&(o=r.custom_fields),[function(){var t=Math.random()*Math.PI*2;o.ox=50*Math.cos(t),o.oy=64+50*Math.sin(t),o.count=0},repeat([repeat((function(t){return[function(){return _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n.INSTANCE.add(new _entity_MovePoint__WEBPACK_IMPORTED_MODULE_0__.uQ(0==o.count?n[_][0]:n[_][1],e).simpleInit(o.ox,o.oy,i,2*Math.PI/30*t).init((function(t,e){void 0===e&&(e=t.custom_fields),e.callback=function(){return o.count++}})))}]}),30),function(){return o.count=0},60*t],10)]})),165*t];var _}))])};stage_list=[test_000,test_001,stage_000,stage_001,stage_002,stage_003,stage_004,stage_005];var stage_settings={init,stage:7,scale:3,list:stage_list};function init(){return __awaiter(this,void 0,void 0,(function(){var pool;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,sinit.load_sprite()];case 1:return _a.sent(),pool=new _stage_EntityPool__WEBPACK_IMPORTED_MODULE_6__.n,pool.add(sinit.add_player()),pool.add(stage_list[stage_settings.stage](stage_settings.scale)),eval("window.debug_info.pool = pool"),eval("window.debug_info.stage = stage_settings"),[2]}}))}))}},566:(t,e,n)=>{"use strict";n.d(e,{bn:()=>o,D8:()=>s,HC:()=>u,Yw:()=>p,hE:()=>c,eY:()=>h,u5:()=>l,_R:()=>d});var i,r,_=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(){},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e}(o),s=function(t){function e(e){var n=t.call(this)||this;return n.radius=e,n}return _(e,t),e.prototype.exitScreen=function(t,e,n){var i=Math.sqrt(Math.pow(t.shaped_sprite.w,2)+Math.pow(t.shaped_sprite.h,2));return Math.abs(t.px)>e+i*t.magn||Math.abs(t.py)>n+i*t.magn},e.prototype.distanceTo=function(t,e,n){return Math.sqrt(Math.pow(e-t.px,2)+Math.pow(n-t.py,2))-this.radius*t.magn},e.prototype.rawDistanceTo=function(t,e,n,i,r){return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2))-this.radius*n},e.prototype.rawExitScreen=function(t,e,n,i,r){var _=Math.sqrt(Math.pow(n.w,2)+Math.pow(n.h,2));return Math.abs(t)>i+_||Math.abs(e)>r+_},e}(a),u=function(t){function e(e,n){var i=t.call(this)||this;return i.len=e,i.rad=n,i}return _(e,t),e.orthDis=function(t,e,n,i){var r=i/2;t=Math.abs(t);var _=n*n/r/2+r/2-r;return(e=Math.abs(e))>=0&&n*(e+_)>t*_?Math.sqrt(Math.pow(t,2)+Math.pow(e+_,2))-_-r:Math.sqrt(Math.pow(t-n,2)+Math.pow(e,2))-r},e.prototype.exitScreen=function(t,e,n){var i=Math.sqrt(Math.pow(t.shaped_sprite.w,2)+Math.pow(t.shaped_sprite.h,2));return Math.abs(t.px)>e+i*t.magn||Math.abs(t.py)>n+i*t.magn},e.prototype.distanceTo=function(t,n,i){var r=n-t.px,_=i-t.py,o=r*Math.cos(-t.dir)-_*Math.sin(-t.dir),a=r*Math.sin(-t.dir)+_*Math.cos(-t.dir);return e.orthDis(o,a,this.len/2*t.magn,this.rad*t.magn)},e}(a),p=function(){},c=(_((function(){return null!==r&&r.apply(this,arguments)||this}),r=p),function(){function t(t,e){this.collideCheck=null,this.renderType=t,this.shaped_sprite=e}return t.prototype.distanceTo=function(t,e){var n;return(null===(n=this.shaped_sprite)||void 0===n?void 0:n.shape)?this.shaped_sprite.shape.distanceTo(this,t,e):1/0},t}()),h=function(t){function e(e){var n=t.call(this,0,e)||this;return n.magn=1,n.alpha=1,n}return _(e,t),e.prototype.rectCount=function(){return 1},e.prototype.render=function(t,e){t[10*e+0]=this.px,t[10*e+1]=this.py,t[10*e+2]=this.dir+Math.PI/2,t[10*e+3]=this.shaped_sprite.w/2*this.magn,t[10*e+4]=this.shaped_sprite.h/2*this.magn;var n=this.shaped_sprite.sprite;t[10*e+5]=n.tx/n.sprite.w,t[10*e+6]=n.ty/n.sprite.h,t[10*e+7]=n.tw/n.sprite.w,t[10*e+8]=n.th/n.sprite.h,t[10*e+9]=this.alpha},e}(c),l=function(t){function e(){return t.call(this,null,null)||this}return _(e,t),e}(c);function d(t,e){if(t.collideCheck)return t.collideCheck(e);if(e.collideCheck)return e.collideCheck(t);if(t instanceof h&&t.shaped_sprite.shape instanceof s)return e.distanceTo(t.px,t.py)<t.shaped_sprite.shape.radius;if(e instanceof h&&e.shaped_sprite.shape instanceof s)return d(e,t);throw new Error("non-circle non-circle collision not found")}},68:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(924),r=function(){function t(t){this.img=null,this.path=t}return t.prototype.loaded=function(){return this.img},t.prototype.load=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,i,r,_,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return _={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function a(_){return function(a){return function(_){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&_[0]?i.return:_[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,_[1])).done)return r;switch(i=0,r&&(_=[2&_[0],r.value]),_[0]){case 0:case 1:r=_;break;case 4:return o.label++,{value:_[1],done:!1};case 5:o.label++,i=_[1],_=[0];continue;case 7:_=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==_[0]&&2!==_[0])){o=0;continue}if(3===_[0]&&(!r||_[1]>r[0]&&_[1]<r[3])){o.label=_[1];break}if(6===_[0]&&o.label<r[1]){o.label=r[1],r=_;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(_);break}r[2]&&o.ops.pop(),o.trys.pop();continue}_=e.call(t,o)}catch(t){_=[6,t],i=0}finally{n=r=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,a])}}}(this,(function(e){switch(e.label){case 0:return[4,i.po(this.path)];case 1:return t=e.sent(),this.img=i.yG(t),[2]}}))},new((n=void 0)||(n=Promise))((function(i,_){function o(t){try{s(r.next(t))}catch(t){_(t)}}function a(t){try{s(r.throw(t))}catch(t){_(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.get=function(e){return t.INS[e]?t.INS[e]:t.INS[e]=new t(e)},t.prototype.draw=function(t){this.drawRect(t,0),this.drawRect(t,1);for(var e=0,n=t;e<n.length;e++){var r=n[e];if(1==r.renderType)for(var _=r,o=_.getSprite(),a=o.sprite,s=0,u=_.render();s<u.length;s++){var p=u[s];i.AJ(p,o.w,p.length/2,a.tx,a.ty,a.tw,a.th,this.img)}}},t.prototype.drawRect=function(t,e){var n=t.reduce((function(t,n){return 0==n.renderType&&n.shaped_sprite.sprite.mode==e?t+n.rectCount():t}),0);if(n){i.PM(e);for(var r=new Float32Array(10*n),_=0,o=0,a=t;o<a.length;o++){var s=a[o];if(0==s.renderType&&s.shaped_sprite.sprite.mode==e){var u=s;u.render(r,_),_+=u.rectCount()}}i.bn(r,n,this.img)}},t.INS={},t}()},583:(t,e,n)=>{"use strict";n.d(e,{xg:()=>s,p3:()=>u,iW:()=>p});var i=n(296),r=n(566),_=n(940),o=[[1.4,0],[2.4,2.4,4,4,2.4,2.4,2.4,2.8,2.4,2.4,4,2.4,2.4,2.4,2.4,2.4],[6,7,8.5,7,6,7,0,10],[14,14]],a=.75;function s(t,e){return e*=a,{sprite:t,shape:new r.D8(o[t.category][t.type]*e),w:t.tw*e,h:t.th*e,renderType:0}}function u(t,e,n){var i=(0,_.e8)(4,t,e);return{sprite:i,shape:new r.HC(n,o[1][4]*a),renderType:0,w:i.tw*a,h:1.25*n}}function p(t,e,n,r,o,u,p){var c=(0,_.e8)(t,e,r);return c.ty+=0==t?4:4==t||1==t?1:NaN,c.th-=0==t?8:4==t?2:1==t?1:NaN,{sprite:c,shape:new i.cE(0==t?i.cE.line_circle:1==t?i.cE.half_arc:4==t?i.cE.double_arc:null),renderType:0,sprite_width:c.tw*a/2*p,hitbox_width:2.4*a*p,l_ratio:0==t||u>0?1:4==t?1.15:1==t?1.2:NaN,base:s((0,_.hZ)(0,n,r),o*p),end:s((0,_.hZ)(0,n,r),u*p)}}},940:(t,e,n)=>{"use strict";n.d(e,{Xp:()=>o,e8:()=>a,hZ:()=>s,a_:()=>u,cI:()=>p});var i=[0,0,1,1,0,0,0,0,0,1,1,1,1,0,0],r=[1,1,1,0,0,0,1,0],_=2*Math.PI/600,o={path:"assets/bullet_000.png",w:516,h:772};function a(t,e,n){return{sprite:o,tx:t<12?1+16*e:t<14?1+e%8*8:t<15?1:258+16*e,ty:t<12?1+16*t:t<14?(t<13?193:241)+8*(e>>3):e<15?515+16*e:449,tw:t<12?16:t<14?8:t<15?256:16,th:t<12?16:t<14?8:16,mode:n,category:1,type:t,color:e,omega:i[t]*_}}function s(t,e,n){return{sprite:o,tx:(t<7?1:258)+32*e,ty:0==t?209:t<7?226+32*t:257,tw:32,th:32,mode:n,category:2,type:t,color:e,omega:r[t]*_}}var u={sprite:o,tx:258,ty:17,tw:64,th:64,mode:0,category:0,type:0,color:0,omega:_},p={sprite:o,tx:386,ty:81,tw:128,th:128,mode:0,category:0,type:2,color:0,omega:_}},235:()=>{const t=document.getElementById("stage_start"),e=document.getElementById("stage_dec"),n=document.getElementById("stage_inc"),i=debug_info.stage;e.onclick=()=>{i.stage>0&&i.stage--,e.disabled=0==i.stage,n.disabled=i.stage==i.list.length-1,t.value=`start stage ${i.stage}`},n.onclick=()=>{i.stage<i.list.length&&i.stage++,e.disabled=0==i.stage,n.disabled=i.stage==i.list.length-1,t.value=`start stage ${i.stage}`},e.disabled=0==i.stage,n.disabled=i.stage==i.list.length-1,t.value=`start stage ${i.stage}`},924:(t,e,n)=>{"use strict";n.d(e,{cY:()=>_,PM:()=>o,po:()=>a,yG:()=>u,ZH:()=>p,bn:()=>E,AJ:()=>M});var i=n(349);n(940);const r={gl:null,shader:{program:0,attribute:{coord:0,tex:0,alpha:0},uniform:{uSampler:0}}};function _(){var t=document.getElementById("glcanvas"),e=t.getContext("webgl");if(null===e)return void alert("Unable to initialize WebGL. Your browser or machine may not support it.");r.gl=e;var n=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(n,"\nattribute vec2 coord;\nattribute vec2 tex;\nattribute float alpha;\nvarying highp vec2 vTexCoord;\nvarying highp float vTexAlpha;\nvoid main() {\n    gl_Position = vec4(coord, 0.0, 1.0);\n    vTexCoord = tex;\n    vTexAlpha = alpha;\n}\n"),e.shaderSource(i,"\nprecision highp float;\nvarying highp vec2 vTexCoord;\nvarying highp float vTexAlpha;\nuniform sampler2D uSampler;\nvoid main() {\n    vec4 col = texture2D(uSampler, vTexCoord);\n    col.a *= vTexAlpha;\n    col.rgb *= col.a;\n    gl_FragColor = col;\n}\n"),e.compileShader(n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var _=e.getShaderInfoLog(i);return void console.log(_)}var o=e.createProgram();e.attachShader(o,n),e.attachShader(o,i),e.linkProgram(o),e.useProgram(o);const a=r.shader;a.program=o,a.attribute.coord=e.getAttribLocation(o,"coord"),a.attribute.tex=e.getAttribLocation(o,"tex"),a.attribute.alpha=e.getAttribLocation(o,"alpha"),a.uniform.uSampler=e.getUniformLocation(o,"uSampler"),e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.disable(e.DEPTH_TEST),e.viewport(0,0,t.width,t.height)}function o(t){const e=r.gl;0==t?e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA):e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA)}function a(t){return new Promise(((e,n)=>{let i=new Image;i.onload=()=>e(i),i.onerror=n,i.src=t}))}function s(t,e,n,i,_){const o=r.gl,a=o.createBuffer(),s=r.shader.attribute.coord;o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,t,o.STATIC_DRAW),o.vertexAttribPointer(s,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s);const u=o.createBuffer(),p=r.shader.attribute.tex;o.bindBuffer(o.ARRAY_BUFFER,u),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),o.vertexAttribPointer(p,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(p);const c=o.createBuffer(),h=r.shader.attribute.alpha;o.bindBuffer(o.ARRAY_BUFFER,c),o.bufferData(o.ARRAY_BUFFER,n,o.STATIC_DRAW),o.vertexAttribPointer(h,1,o.FLOAT,!1,0,0),o.enableVertexAttribArray(h),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(r.shader.uniform.uSampler,0),o.drawArrays(o.TRIANGLES,0,_)}function u(t){const e=r.gl,n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_SHORT_4_4_4_4,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n}function p(){const t=r.gl;t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.clearColor(0,0,1,1)}const c=[-1,-1,1,-1,1,1],h=[-1,1,1,-1,-1,1],l=[0,0,1,0,1,1],d=[0,1,1,0,0,1];function f(t){for(var e=0;e<t.length/2;e++)t[2*e]=(0,i.OK)(t[2*e]),t[2*e+1]=(0,i.ZA)(t[2*e+1])}function E(t,e,n){const i=new Float32Array(12*e),r=new Float32Array(12*e),_=new Float32Array(6*e);Math.PI;for(var o=0;o<e;o++)for(var a=0;a<6;a++){const e=t[10*o+2],n=t[10*o+3]*c[a],s=t[10*o+4]*h[a];i[12*o+2*a+0]=t[10*o+0]+n*Math.cos(e)-s*Math.sin(e),i[12*o+2*a+1]=t[10*o+1]+n*Math.sin(e)+s*Math.cos(e),r[12*o+2*a+0]=t[10*o+5]+l[a]*t[10*o+7],r[12*o+2*a+1]=t[10*o+6]+d[a]*t[10*o+8],_[6*o+a]=t[10*o+9]}f(i),s(i,r,_,n,6*e)}function M(t,e,n,i,_,o,a,s){const u=new Float32Array(6*n),p=new Float32Array(n),c=new Float32Array(6*n),h=new Int16Array(2*(n-1));for(var l=0,d=0;d<n-1;d++){const n=t[2*d],i=t[2*d+1],r=t[2*d+2],_=t[2*d+3],o=(n+r)/2,a=(i+_)/2,s=Math.sqrt((r-n)*(r-n)+(_-i)*(_-i));p[d]=s,l+=s,u[6*d+0]=n,u[6*d+1]=i,u[6*d+2]=o-(a-i)/s*e,u[6*d+3]=a+(o-n)/s*e,u[6*d+4]=o+(a-i)/s*e,u[6*d+5]=a-(o-n)/s*e}f(u),l-=p[0]/2+p[n-1]/2;var E=-p[0]/2;for(d=1;d<n;d++)c[6*d+0]=i+o*E/l,c[6*d+1]=_+a/2,E+=p[d]/2,c[6*d+2]=i+o*E/l,c[6*d+3]=_,c[6*d+4]=i+o*E/l,c[6*d+5]=_+a,E+=p[d]/2;for(d=0;d<n-1;d++)h[2*d+0]=3*d+1,h[2*d+1]=3*d+3;h[2*n-3]--;const M=r.gl,y=M.createBuffer(),P=r.shader.attribute.coord;M.bindBuffer(M.ARRAY_BUFFER,y),M.bufferData(M.ARRAY_BUFFER,u,M.STATIC_DRAW),M.vertexAttribPointer(P,2,M.FLOAT,!1,0,0),M.enableVertexAttribArray(P);const v=M.createBuffer(),m=r.shader.attribute.tex;M.bindBuffer(M.ARRAY_BUFFER,v),M.bufferData(M.ARRAY_BUFFER,c,M.STATIC_DRAW),M.vertexAttribPointer(m,2,M.FLOAT,!1,0,0),M.enableVertexAttribArray(m),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,s),M.uniform1i(r.shader.uniform.uSampler,0);const g=M.createBuffer();for(M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,g),M.bufferData(M.ELEMENT_ARRAY_BUFFER,h,M.STATIC_DRAW),M.drawElements(M.TRIANGLE_STRIP,2*n-2,M.UNSIGNED_SHORT,0),d=0;d<n-1;d++)h[2*d+0]=3*d,h[2*d+1]=3*d+2;h[0]++,M.bufferData(M.ELEMENT_ARRAY_BUFFER,h,M.STATIC_DRAW),M.drawElements(M.TRIANGLE_STRIP,2*n-2,M.UNSIGNED_SHORT,0)}window.debug_info={},window.debug_info.global_gl=r,window.debug_info.gl_func={setup:_,clear:p,draw:s,drawStrip:function(t,e,n,i,_){const o=r.gl,a=o.createBuffer(),s=r.shader.attribute.coord;o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,t,o.STATIC_DRAW),o.vertexAttribPointer(s,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s);const u=o.createBuffer(),p=r.shader.attribute.tex;o.bindBuffer(o.ARRAY_BUFFER,u),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),o.vertexAttribPointer(p,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(p);const c=o.createBuffer();o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,c),o.bufferData(o.ELEMENT_ARRAY_BUFFER,n,o.STATIC_DRAW),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(r.shader.uniform.uSampler,0),o.drawElements(o.TRIANGLE_STRIP,_,o.UNSIGNED_SHORT,0)},drawRects:E,drawSnake:M}}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](e,e.exports,__webpack_require__),e.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{KEY_CLICK:()=>R,KEY_PRESS:()=>T,canvas_height:()=>l,canvas_width:()=>h,devicePixelRatio:()=>M,keys:()=>g,last_update_rate:()=>y,mainloop_start:()=>A,mainloop_terminate:()=>w,mouse:()=>m,setup_canvas:()=>D,test_fps:()=>P});var e=__webpack_require__(176),n=__webpack_require__(924),i=__webpack_require__(822),r=__webpack_require__(533),_=__webpack_require__(349),o=!1,a=!1,s=0,u=0,p=0,c=0;var h,l,d=0,f=0,E=null,M=1,y=1;function P(){return d=performance.now(),f=241,v(),new Promise(((t,e)=>{E=t}))}function v(){if(--f)requestAnimationFrame(v);else{var t=(performance.now()-d)/240;y=Math.round(t/(1e3/60)),E(y)}}var m={x:0,y:0},g={};function D(){document.onmousemove=t=>{m.x=t.pageX,m.y=t.pageY},document.ontouchstart=t=>{g._touch=3,m.x=t.pageX,m.y=t.pageY,t.preventDefault()},document.ontouchend=t=>{g._touch=1,m.x=t.pageX,m.y=t.pageY,t.preventDefault()},document.ontouchmove=t=>{m.x=t.pageX,m.y=t.pageY,t.preventDefault()},document.onmousedown=t=>{g._press=3},document.onmouseup=t=>{g._press=1},document.addEventListener("keydown",(t=>{var e=t.key;1==e.length&&(e=e.toLowerCase()),g[e]=3}),!1),document.addEventListener("keyup",(t=>{var e=t.key;1==e.length&&(e=e.toLowerCase()),g[e]=1}),!1);var t=window.innerWidth,e=window.innerHeight,i=.95*Math.min(t/_.Fy,e/_.bE),r=document.getElementById("glcanvas");h=i*_.Fy,l=i*_.bE,r.style.width=h+"px",r.style.height=l+"px",M=window.devicePixelRatio||1,r.width=h*M,r.height=l*M,n.cY()}var O=!1;function A(){O||(O=!0,x())}function w(){O=!1}function x(){!function(){var t=i.n.INSTANCE;if(t){var e=function(){if(g.Escape==R&&(o=!o),o)return a=!1,null;var t=0,e=0;g.Shift>=T||g._touch>=T||g._press>=T?(a||(a=!0,s=m.x,u=m.y,p=0,c=0),t=m.x-s-p,e=m.y-u-c,p+=t,c+=e):a=!1,t=t/h*_.Fy*2,e=-e/l*_.bE*2;var n=g.Shift>=T?2:3;return(g.w>=T||g.ArrowUp>=T)&&(e+=n),(g.s>=T||g.ArrowDown>=T)&&(e-=n),(g.a>=T||g.ArrowLeft>=T)&&(t-=n),(g.d>=T||g.ArrowRight>=T)&&(t+=n),{pos_x:t,pos_y:e,key_z:g.z>=T,key_x:g.x==R,key_c:g.c==R}}();if(!o&&(r.U.updateState(e),!o))for(var d=0;d<y;d++)t.update();n.ZH(),t.render()}}(),function(){for(var t in g)3==g[t]&&(g[t]=2),1==g[t]&&(g[t]=0)}(),O&&requestAnimationFrame(x)}const T=2,R=3;window.onload=async function(){D(),await e.S(),__webpack_require__(235),A(),window.debug_info.stg={fps:P,init:e.S,start:A,terminate:w},window.debug_info.platform=t}})()})();